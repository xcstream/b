<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>blog</title>
    <script src="https://cdn.bootcss.com/vue/2.5.3/vue.min.js"></script>
    <link href="https://cdn.bootcss.com/element-ui/2.0.4/theme-chalk/index.css" rel="stylesheet">
    <script src="https://cdn.bootcss.com/element-ui/2.0.4/index.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bubbly-bg@0.2.3/dist/bubbly-bg.js"></script>
    <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.js"></script>
</head>
<body>
<style>
    #loginbtn:hover{
        transform:perspective(800px) rotateX(20deg) rotateY(20deg))
    }
</style>
<div>

    <div id="loginbtn" style="float:right">
        <span v-if="username">欢迎{{username}}</span>
        <el-button @click="gotologin" v-if="!username">
            登录
        </el-button>
        <el-button @click="gotologout">
            退出
        </el-button>
    </div>

</div>
<script>

    window.vm = new Vue({
        el:'body>div',
        data:{
            username:null
        },
        methods:{
            gotologin:function () {
                window.location.href = '/login.html'
            },
            gotologout:function () {
                $.post('/api/logout', {
                        username:vm.username,
                        password:vm.password
                    }
                ).then(function (x) {
                    console.log(x)
                    if(x.code == 200){
                        vm.username = null
                    }
                })
            }
        }
    })


    $.post('/api/info').then(function (x) {
        vm.username=x.username
        if(x.username){
        }else{

        }
    })
</script>
<script>bubbly();</script>

</body>
</html>